<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Payment</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="logo">Aur√®le</div>
  <div class="step-indicator">
    <span class="step done">‚úì Checkout</span>
    <span class="step-sep">‚Ä∫</span>
    <span class="step active">2 Payment</span>
    <span class="step-sep">‚Ä∫</span>
    <span class="step">3 Confirm</span>
  </div>
</header>

<div class="container">

  <div>
    <p class="section-title">Payment Details</p>
    <div class="card">
      <div class="pay-tabs">
        <button class="pay-tab active" onclick="switchTab('card', this)">
          üí≥ <span>Credit Card</span>
        </button>
        <button class="pay-tab" onclick="switchTab('paypal', this)">
          üÖøÔ∏è <span>PayPal</span>
        </button>
        <button class="pay-tab" onclick="switchTab('crypto', this)">
          ‚Çø <span>Crypto</span>
        </button>
      </div>


      <div class="tab-content active" id="tab-card">
        <div class="form-group" id="fg-name">
          <label>Cardholder Name</label>
          <input type="text" id="cardName" placeholder="Jane Doe" />
          <div class="error-msg">Please enter the name on your card.</div>
        </div>
        <div class="form-group" id="fg-num">
          <label>Card Number</label>
          <div class="card-input-wrap">
            <input type="text" id="cardNum" placeholder="0000 0000 0000 0000" maxlength="19" oninput="formatCard(this)" />
            <div class="card-icons">
              <div class="card-icon visa">VISA</div>
              <div class="card-icon mc">MC</div>
            </div>
          </div>
          <div class="error-msg">Please enter a valid 16-digit card number.</div>
        </div>
        <div class="form-row">
          <div class="form-group" id="fg-exp">
            <label>Expiry Date</label>
            <input type="text" id="expiry" placeholder="MM / YY" maxlength="7" oninput="formatExpiry(this)" />
            <div class="error-msg">Enter a valid expiry.</div>
          </div>
          <div class="form-group" id="fg-cvv">
            <label>CVV</label>
            <input type="text" id="cvv" placeholder="123" maxlength="4" oninput="this.value=this.value.replace(/\D/g,'')" />
            <div class="error-msg">Enter a valid CVV.</div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="tab-paypal">
        <div class="alt-panel">
          <div class="big-icon">üÖøÔ∏è</div>
          <p>You'll be redirected to PayPal to complete your payment securely. Click "Pay Now" to continue.</p>
        </div>
      </div>

      <div class="tab-content" id="tab-crypto">
        <div class="alt-panel">
          <div class="big-icon">‚Çø</div>
          <p>Pay with Bitcoin, Ethereum, or USDC. A wallet QR code will be generated after clicking "Pay Now".</p>
        </div>
      </div>
    </div>

    <a href="checkout.html" class="back-link">
      ‚Üê Back to Checkout
    </a>
  </div>


  <div>
    <p class="section-title">Order Info</p>
    <div class="card order-info">
      <div id="orderDetails">
        <div class="info-row">
          <span class="info-label">Name</span>
          <span class="info-val" id="dispName">‚Äî</span>
        </div>
        <div class="info-row">
          <span class="info-label">Email</span>
          <span class="info-val" id="dispEmail">‚Äî</span>
        </div>
        <div class="info-row">
          <span class="info-label">Ship To</span>
          <span class="info-val" id="dispAddress">‚Äî</span>
        </div>
        <div class="info-row">
          <span class="info-label">Items</span>
          <span class="info-val">3 items</span>
        </div>
      </div>

      <div class="total-highlight">
        <div>
          <div class="label">Amount Due</div>
        </div>
        <div class="amount" id="dispTotal">$185.12</div>
      </div>

      <button class="btn-pay" id="payBtn" onclick="processPayment()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
        Pay Now
      </button>

      <div class="secure-badge">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        SSL Encrypted ¬∑ Secure Checkout
      </div>
    </div>
  </div>
</div>


<div class="overlay" id="successOverlay">
  <div class="success-box">
    <div class="checkmark">‚úì</div>
    <div class="success-title">Payment Successful!</div>
    <div class="success-sub">Thank you for your order. A confirmation has been sent to your email.</div>
    <div class="success-order">
      Order <strong>#AUR-<span id="orderId"></span></strong><br>
      <span style="font-size:0.8rem;">Estimated delivery: 3‚Äì5 business days</span>
    </div>
    <button class="btn-done" onclick="location.href='checkout.html'">Continue Shopping</button>
  </div>
</div>

<script>

  const data = JSON.parse(sessionStorage.getItem('checkout') || '{}');
  document.getElementById('dispName').textContent    = data.name    || 'Guest';
  document.getElementById('dispEmail').textContent   = data.email   || '‚Äî';
  document.getElementById('dispAddress').textContent = data.address || '‚Äî';
  document.getElementById('dispTotal').textContent   = data.total   || '$185.12';

  let activeTab = 'card';

  function switchTab(tab, btn) {
    activeTab = tab;
    document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
    document.querySelectorAll('.pay-tab').forEach(el => el.classList.remove('active'));
    document.getElementById('tab-' + tab).classList.add('active');
    btn.classList.add('active');
  }

  function formatCard(el) {
    let v = el.value.replace(/\D/g, '').substring(0, 16);
    el.value = v.replace(/(.{4})/g, '$1 ').trim();
  }

  function formatExpiry(el) {
    let v = el.value.replace(/\D/g, '').substring(0, 4);
    if (v.length >= 2) v = v.slice(0,2) + ' / ' + v.slice(2);
    el.value = v;
  }

  function validate(groupId, fieldId, check) {
    const group = document.getElementById(groupId);
    const val = document.getElementById(fieldId)?.value.trim() || '';
    if (!check(val)) { group.classList.add('error'); return false; }
    group.classList.remove('error');
    return true;
  }

  function processPayment() {
    if (activeTab === 'card') {
      const ok = [
        validate('fg-name', 'cardName', v => v.length > 1),
        validate('fg-num', 'cardNum', v => v.replace(/\s/g,'').length === 16),
        validate('fg-exp', 'expiry', v => /^\d{2} \/ \d{2}$/.test(v)),
        validate('fg-cvv', 'cvv', v => v.length >= 3),
      ].every(Boolean);
      if (!ok) return;
    }

    const btn = document.getElementById('payBtn');
    btn.disabled = true;
    btn.textContent = 'Processing...';

    setTimeout(() => {
      document.getElementById('orderId').textContent = Math.floor(100000 + Math.random() * 900000);
      document.getElementById('successOverlay').classList.add('show');
      sessionStorage.removeItem('checkout');
    }, 2000);
  }
</script>
</body>
</html>
